import{z as E,A as w,r as g,o as Z,a as u,c as b,m as ee,b as e,F as x,h as M,y as ve,v as pe,f as be,q as D,G as ye,l as I,t as j,u as k,H as he,I as fe,J as je,k as q,n as K,C as S,j as G}from"./index.27387f5e.js";var ke="/joy-toys/assets/bottle_01.61af237a.png",we="/joy-toys/assets/bottle_02.503a595e.png",Pe="/joy-toys/assets/bottle_03.f82feafb.png",$e="/joy-toys/assets/bottle_04.387b6590.png",De="/joy-toys/assets/bottle_05.519ce283.png",Le="/joy-toys/assets/bottle_06.02ade757.png",Ce="/joy-toys/assets/bottle_07.e8a57db8.png",Se="/joy-toys/assets/bottle_08.1c39276e.png",Ge="/joy-toys/assets/bottle_09.0d93018d.png",xe="/joy-toys/assets/candy_01.309c60ef.png",Me="/joy-toys/assets/candy_02.0f02f1bd.png",Te="/joy-toys/assets/candy_03.b0041721.png",Re="/joy-toys/assets/muti_object_01.e03baba1.png",Ue="/joy-toys/assets/muti_object_02.5c2535b1.png",Ne="/joy-toys/assets/muti_object_03.ebde4353.png",He="/joy-toys/assets/bear.dc1af04a.png",We="/joy-toys/assets/butterfly.0586444d.png",Xe="/joy-toys/assets/double-heart.8de2ec47.png",Ie="/joy-toys/assets/flower.229a3cf6.png",Ee="/joy-toys/assets/kana.ff17397a.png",ae="/joy-toys/assets/kana_01.c63aa3bd.png",te="/joy-toys/assets/kana_03.86aea46c.png",se="/joy-toys/assets/book.9a3bdc28.png",re="/joy-toys/assets/bgm.65c19ae0.png",oe="/joy-toys/assets/bear_02.ab4f635e.png",Be="/joy-toys/assets/live_2.ec1fd8af.png",Ye="/joy-toys/assets/bg-01.1ebcadbb.jpg",Ae="/joy-toys/assets/bg-02.31f8f0ab.jpg",Oe="/joy-toys/assets/bg-03.4c8af1ad.jpg";const Ve={class:"game-page loading-page"},Fe=e("h2",{class:"page-title"},"Loading...",-1),ze=["src","alt"],Je=["src","alt"],qe=ve('<li><img src="'+Ee+'" alt="kana"><img src="'+ae+'" alt="kana"><img src="'+be+'" alt="kana"><img src="'+te+'" alt="kana"><img src="'+se+'" alt="book"><img src="'+re+'" alt="bgm"><img src="'+oe+'" alt="bear"><img src="'+Be+'" alt="live"><img src="'+Ye+'" alt="bg"><img src="'+Ae+'" alt="bg"><img src="'+Oe+'" alt="bg"></li>',1),Ke={__name:"RunwayGameLoading",props:E({charaterDataList:Array,objectsDataList:Array},{gameProgress:{},gameProgressModifiers:{}}),emits:["update:gameProgress"],setup(d){const i=w(d,"gameProgress"),m=d,r=g(!0);async function n(){function _(c){let t=new Image;t.src=c}for(let c=0;c<m.charaterDataList.length;c++)_(m.charaterDataList.imgUrl);for(let c=0;c<m.objectsDataList.length;c++)_(m.objectsDataList.imgUrl)}return Z(()=>{n().then(function(){function _(){switch(console.log("Loading..."),document.readyState){case"interactive":case"complete":r.value=!1,r.value||setTimeout(()=>{i.value="ready"},1500),clearInterval(c),console.log("Ready!");break}}let c=setInterval(_,500)})}),(_,c)=>(u(),b("div",Ve,[Fe,ee(e("ul",null,[(u(!0),b(x,null,M(m.charaterDataList,(t,l)=>(u(),b("li",{key:`player-${l}`},[e("img",{src:t.imgUrl,alt:t.imgName},null,8,ze)]))),128)),(u(!0),b(x,null,M(m.objectsDataList,(t,l)=>(u(),b("li",{key:`object-${l}`},[e("img",{src:t.imgUrl,alt:t.imgName},null,8,Je)]))),128)),qe],512),[[pe,!1]])]))}},Qe={class:"game-page ready-page"},Ze=e("h2",{class:"page-title"},"Runway Game",-1),ea=e("div",{class:"hero-img"},[e("div",{class:"image-wrap"},[e("img",{src:ae,alt:"kana"})])],-1),aa=e("div",{class:"image-wrap"},[e("img",{src:se,alt:"book"})],-1),ta=e("span",null,[D("Read"),e("br"),D("Book")],-1),sa=[aa,ta],ra=e("div",{class:"image-wrap"},[e("img",{src:re,alt:"bgm"})],-1),oa=e("span",null,"BGM",-1),la=[ra,oa],ca=e("div",{class:"image-wrap"},[e("img",{src:oe,alt:"bear"})],-1),na=e("span",null,"Select Player",-1),ia=[ca,na],ua={__name:"RunwayGameReady",props:{gameProgress:{},gameProgressModifiers:{}},emits:["update:gameProgress"],setup(d){const i=w(d,"gameProgress");function m(){i.value="choose"}function r(){alert("\u5C1A\u672A\u958B\u653E")}function n(){alert("\u5C1A\u672A\u958B\u653E")}return(_,c)=>(u(),b("div",Qe,[Ze,e("div",{class:"ready-wrap"},[ea,e("div",{onClick:n,class:"image-btn btn-book"},sa),e("div",{onClick:r,class:"image-btn btn-bgm"},la),e("div",{onClick:m,class:"image-btn btn-bear"},ia)])]))}},_a={class:"game-page select-page"},ga=e("h2",{class:"page-title"},"Select Player",-1),ma={class:"select-wrap"},da={class:"player-card-wrap"},va=["for"],pa=["id","value"],ba={class:"image-wrap"},ya=["src","alt"],ha={class:"text-wrap"},fa={class:"card-title"},ja=e("div",{class:"page-bottom-img"},[e("div",{class:"image-wrap"},[e("img",{src:te,alt:"kana"})])],-1),ka={__name:"RunwayGameChoose",props:E({charaterDataList:Array},{gameProgress:{},gameProgressModifiers:{},curCharaterData:{},curCharaterDataModifiers:{}}),emits:["update:gameProgress","update:curCharaterData"],setup(d){const i=w(d,"gameProgress"),m=w(d,"curCharaterData"),r=d,n=g(1);function _(){let t=r.charaterDataList.filter(l=>l.imgId==n.value);m.value=t[0],i.value="playing"}function c(){i.value="ready"}return(t,l)=>(u(),b("div",_a,[ga,e("div",ma,[e("div",da,[(u(!0),b(x,null,M(r.charaterDataList,(v,y)=>(u(),b("label",{key:y,class:"radio-label",for:`player-${y}`},[ee(e("input",{type:"radio",class:"btn-check",name:"options",id:`player-${y}`,autocomplete:"off",value:v.imgId,"onUpdate:modelValue":l[0]||(l[0]=T=>n.value=T)},null,8,pa),[[ye,n.value]]),e("div",{class:I(["card player-card",{active:v.imgId===n.value}])},[e("div",ba,[e("img",{src:v.imgUrl,alt:v.imgName},null,8,ya)]),e("div",ha,[e("span",fa,j(v.playerName),1),e("ul",null,[e("li",null,"Speed: "+j(v.playerPace),1),e("li",null,"Lives: "+j(v.playerLives),1)])])],2)],8,va))),128))]),e("div",{class:"btns-wrap"},[e("button",{type:"button",onClick:c,class:"btn btn-secondary"},"Back"),e("button",{type:"button",onClick:_,class:"btn btn-primary"},"Start Game")])]),ja]))}},wa={class:"game-page play-page"},Pa={class:"header"},$a={class:"header-item"},Da=e("span",{class:"item-title"},"Lives:",-1),La={class:"item-content"},Ca={class:"header-item"},Sa=e("span",{class:"item-title"},"Scores:",-1),Ga={class:"item-content"},xa={class:"header-item"},Ma=e("span",{class:"item-title"},"Time:",-1),Ta={class:"item-content"},Ra=["data-id","data-type"],Ua=["src","alt"],Na=["src"],Q=5,Ha={__name:"RunwayGamePlaying",props:E({curCharaterData:Object,objectsDataList:Array},{gameProgress:{},gameProgressModifiers:{},lastGameScores:{},lastGameScoresModifiers:{}}),emits:["update:gameProgress","update:lastGameScores"],setup(d){const i=d,m=w(d,"gameProgress"),r=w(d,"lastGameScores"),n=k(()=>!(s.value.lives>0)),_=g(null),c=g(0),t=g(0),l=g(4),v=g([]),y=k(()=>v.value.length),T=k(()=>v.value.filter(a=>a.show===!0));k(()=>T.value.length);let B=[];const le=function(a){a&&B.push({id:a.getAttribute("data-id"),el:a})};he(()=>{B=[]}),fe(()=>{});function ce(){let a=0,p=l.value-1,o=Math.round(Math.random()*(p-a))+a,f=y.value>0&&y.value%10==0?"good":"bad",L=i.objectsDataList.filter(C=>C.objectType===f),W=0,A=L.length-1,de=Math.round(Math.random()*(A-W))+W,X=L[de];v.value.push({id:y.value>0?v.value[y.value-1].id+1:0,type:f,score:X.objectPrice,objectName:X.objectName,imgUrl:X.imgUrl,imgName:X.imgName,show:!0,hit:!1,isProcessed:!1,track:o,curX:(c.value-20)/l.value*o+s.value.curW/2,curY:0,curW:0,curH:0}),q(()=>{B.forEach(C=>{C.id==v.value[y.value-1].id&&(v.value[y.value-1].curW=C.el.clientWidth,v.value[y.value-1].curH=C.el.clientHeight)})}),ne(v.value[y.value-1])}const P=g(5),O=g(30);function ne(a){let p=+s.value.playingTime;switch(!0){case p>100:P.value=45;break;case p>80:P.value=30;break;case p>60:P.value=20;break;case p>40:P.value=15;break;case p>20:P.value=10;break;default:P.value+=.1}let o=a.curY,f=setTimeout(L,O.value);function L(){if(n.value){clearTimeout(f);return}if(f=setTimeout(L,O.value),o>t.value+a.curH)a.isProcessed||(a.isProcessed=!0,a.type=="bad"&&!a.hit&&(s.value.scores+=a.score)),a.show=!1,clearTimeout(f);else if(o+=P.value,a.curY=Math.round(o,0),a.curY>t.value-2*a.curH){let W=a.curX-s.value.curW,A=a.curX+a.curW;if(a.curY+a.curH>s.value.curY&&s.value.curX>=W&&s.value.curX<=A&&!a.hit){switch(a.hit=!0,a.isProcessed=!0,a.type){case"bad":s.value.lives==1&&(s.value.deathReason={id:a.id,name:a.objectName,imgUrl:a.imgUrl,imgName:a.imgName}),s.value.attacked=!0,s.value.lives--;break;case"good":s.value.lives<Q&&(s.value.restore=!0,s.value.lives++);break}setTimeout(function(){s.value.attacked=!1,s.value.restore=!1},600)}}}}const $=g(1500);function V(){if(n.value)return;let a=+s.value.playingTime;switch(!0){case a>100:$.value=300;break;case a>80:$.value=400;break;case a>60:$.value=600;break;case a>40:$.value=800;break;case a>20:$.value=1200;break;default:$.value=1500}ce(),setTimeout(V,$.value)}const h=g(null),s=g({id:i.curCharaterData.id,name:i.curCharaterData.name,pace:i.curCharaterData.playerPace,lives:i.curCharaterData.playerLives,scores:0,playingTime:0,attacked:!1,restore:!1,deathReason:null,curW:0,curH:0,curX:0,curY:0}),ie=k(()=>10),ue=k(()=>c.value-s.value.curW-15);function R(a,p){switch(a){case"left":s.value.curX>=ie.value&&(s.value.curX-=p);break;case"right":s.value.curX<=ue.value&&(s.value.curX+=p);break}}const U=g(null),_e=g(50),ge=setInterval(function(){if(U.value!=null){if(n.value){clearInterval(ge);return}switch(U.value){case"ArrowLeft":R("left",s.value.pace);break;case"ArrowRight":R("right",s.value.pace);break}}},_e.value),Y=g(null),N=g(!1);function F(a){n.value||(a.type=="touchstart"&&(a=a.touches[0]),N.value=!0,Y.value=a.clientX)}function z(a){if(n.value||!N.value)return;a.type=="touchmove"&&(a=a.touches[0]);let p=a.clientX,o=p-Y.value;Y.value=p;let f=Math.abs(o)>10?10:Math.abs(o);o<0?R("left",f):R("right",f)}function H(a){n.value||!N.value||(N.value=!1)}je(n,async(a,p)=>{a&&setTimeout(()=>{r.value=s.value,m.value="result"},500)});const me=new Date;function J(){if(n.value)return;let a=new Date;s.value.playingTime=((a-me)/1e3).toFixed(2),setTimeout(J,10)}return Z(()=>{document.addEventListener("keydown",a=>{U.value=a.key}),document.addEventListener("keyup",a=>{U.value=null}),q(()=>{c.value=_.value.clientWidth,t.value=_.value.clientHeight,s.value.curW=h.value.clientWidth,s.value.curH=h.value.clientHeight,s.value.curX=c.value/2+15,s.value.curY=t.value-s.value.curH-10,h.value.addEventListener("mousedown",F),h.value.addEventListener("touchstart",F),h.value.addEventListener("mousemove",z),h.value.addEventListener("touchmove",z),h.value.addEventListener("mouseup",H),h.value.addEventListener("mouseleave",H),h.value.addEventListener("touchend",H),h.value.addEventListener("touchcancel",H),V(),J()})}),(a,p)=>(u(),b("div",wa,[e("div",Pa,[e("div",$a,[Da,e("span",La,[(u(),b(x,null,M(Q,o=>e("span",{key:`lives-${o}`,class:I(["live",{active:o<=s.value.lives}])},null,2)),64))])]),e("div",Ca,[Sa,e("span",Ga,j(s.value.scores),1)]),e("div",xa,[Ma,e("span",Ta,j(s.value.playingTime)+"s",1)])]),e("div",{ref_key:"refTrack",ref:_,class:"track"},[(u(!0),b(x,null,M(T.value,(o,f)=>(u(),b("div",{key:o.id,ref_for:!0,ref:le,"data-id":o.id,"data-type":o.type,class:I(["object",{hit:o.hit,hide:!o.show}]),style:K({top:`${o.curY}px`,left:`${o.curX}px`,width:o.curH>=o.curW?`${Math.round(o.curW/o.curH*70)}px`:"70px",height:o.curH>=o.curW?"70px":`${Math.round(o.curH/o.curW*70)}px`})},[e("img",{src:o.imgUrl,alt:o.imgName},null,8,Ua)],14,Ra))),128)),e("div",{ref_key:"refPlayer",ref:h,class:I(["player",{attacked:s.value.attacked,restore:s.value.restore}]),style:K({top:`${s.value.curY}px`,left:`${s.value.curX}px`,width:s.value.curH>=s.value.curW?`${Math.round(s.value.curW/s.value.curH*72)}px`:"72px",height:s.value.curH>=s.value.curW?"72px":`${Math.round(s.value.curH/s.value.curW*72)}px`})},[e("img",{src:i.curCharaterData.imgUrl,alt:"props.curCharaterData.imgName"},null,8,Na)],6)],512)]))}},Wa={class:"game-page result-page"},Xa=e("h2",{class:"page-title"},"Game Over",-1),Ia={class:"result-wrap"},Ea={class:"result-card-wrap"},Ba={class:"card result-card"},Ya={class:"image-wrap"},Aa=["src","alt"],Oa={class:"text-wrap"},Va={class:"card-title"},Fa={class:"list-group list-group-flush"},za={class:"list-group-item"},Ja={class:"text-primary"},qa={class:"list-group-item"},Ka={class:"text-primary"},Qa={class:"list-group-item"},Za={class:"obj-image"},et={class:"image-wrap"},at=["src","alt"],tt={class:"obj-title"},st={__name:"RunwayGameResult",props:E({curCharaterData:Object},{gameProgress:{},gameProgressModifiers:{},lastGameScores:{},lastGameScoresModifiers:{}}),emits:["update:gameProgress","update:lastGameScores"],setup(d){const i=d,m=w(d,"gameProgress"),r=w(d,"lastGameScores");function n(){m.value="playing"}function _(){m.value="choose"}return(c,t)=>(u(),b("div",Wa,[Xa,e("div",Ia,[e("div",Ea,[e("div",Ba,[e("div",Ya,[e("img",{src:i.curCharaterData.imgUrl,alt:i.curCharaterData.imgName},null,8,Aa)]),e("div",Oa,[e("span",Va,j(i.curCharaterData.playerName),1),e("ul",Fa,[e("li",za,[D("Your score is "),e("span",Ja,j(r.value.scores),1)]),e("li",qa,[D("Survive for "),e("span",Ka,j(r.value.playingTime),1),D(" seconds")]),e("li",Qa,[D(" Reasons for losing: "),e("div",Za,[e("div",et,[e("img",{src:r.value.deathReason.imgUrl,alt:r.value.deathReason.imgName},null,8,at)]),e("span",tt,j(r.value.deathReason.name),1)])])])])])]),e("div",{class:"btns-wrap"},[e("button",{type:"button",onClick:n,class:"btn btn-primary"},"Play Again"),e("button",{type:"button",onClick:_,class:"btn btn-secondary"},"Reselect Player")])])]))}},rt=[{id:1,name:"double-heart",player_name:"Double Heart",player_pace:15,player_lives:3},{id:2,name:"flower",player_name:"Flower",player_pace:10,player_lives:4},{id:3,name:"bear",player_name:"Bear",player_pace:20,player_lives:2},{id:4,name:"butterfly",player_name:"Butterfly",player_pace:25,player_lives:1}];var ot={charater:rt};const lt=[{name:"candy_01",object_name:"Candy (Pink)",object_type:"good",object_price:1},{name:"candy_02",object_name:"Candy (Yellow)",object_type:"good",object_price:1},{name:"candy_03",object_name:"Candy (Blue)",object_type:"good",object_price:1},{name:"bottle_01",object_name:"Love Poison",object_type:"bad",object_price:10},{name:"bottle_02",object_name:"Love Letter Poison",object_type:"bad",object_price:10},{name:"bottle_03",object_name:"Depression Poison",object_type:"bad",object_price:10},{name:"bottle_04",object_name:"Jealousy Poison",object_type:"bad",object_price:10},{name:"bottle_05",object_name:"Heart Poison",object_type:"bad",object_price:10},{name:"bottle_06",object_name:"Heartbreak Poison",object_type:"bad",object_price:10},{name:"bottle_07",object_name:"Betrayal Poison",object_type:"bad",object_price:10},{name:"bottle_08",object_name:"Depressive Poison",object_type:"bad",object_price:10},{name:"bottle_09",object_name:"Secret Poison",object_type:"bad",object_price:10},{name:"muti_object_01",object_name:"Compound Poison",object_type:"bad",object_price:10},{name:"muti_object_02",object_name:"Compound Poison",object_type:"bad",object_price:10},{name:"muti_object_03",object_name:"Compound Poison",object_type:"bad",object_price:10}];var ct={objects:lt};const nt={class:"runway-game"},it={class:"runway-game-inner"},ut={class:"page-outer"},gt={__name:"RunwayGame",setup(d){const i=k(()=>{const c=[];return ot.charater.forEach(t=>{c.push({imgId:t.id,imgName:t.name,imgUrl:new URL({"/src/assets/images/runway-game/player/bear.png":He,"/src/assets/images/runway-game/player/butterfly.png":We,"/src/assets/images/runway-game/player/double-heart.png":Xe,"/src/assets/images/runway-game/player/flower.png":Ie}[`/src/assets/images/runway-game/player/${t.name}.png`],self.location),playerName:t.player_name,playerPace:t.player_pace,playerLives:t.player_lives})}),c}),m=k(()=>{const c=[];return ct.objects.forEach(t=>{c.push({imgId:t.id,imgName:t.name,imgUrl:new URL({"/src/assets/images/runway-game/object/bottle_01.png":ke,"/src/assets/images/runway-game/object/bottle_02.png":we,"/src/assets/images/runway-game/object/bottle_03.png":Pe,"/src/assets/images/runway-game/object/bottle_04.png":$e,"/src/assets/images/runway-game/object/bottle_05.png":De,"/src/assets/images/runway-game/object/bottle_06.png":Le,"/src/assets/images/runway-game/object/bottle_07.png":Ce,"/src/assets/images/runway-game/object/bottle_08.png":Se,"/src/assets/images/runway-game/object/bottle_09.png":Ge,"/src/assets/images/runway-game/object/candy_01.png":xe,"/src/assets/images/runway-game/object/candy_02.png":Me,"/src/assets/images/runway-game/object/candy_03.png":Te,"/src/assets/images/runway-game/object/muti_object_01.png":Re,"/src/assets/images/runway-game/object/muti_object_02.png":Ue,"/src/assets/images/runway-game/object/muti_object_03.png":Ne}[`/src/assets/images/runway-game/object/${t.name}.png`],self.location),objectName:t.object_name,objectType:t.object_type,objectPrice:t.object_price})}),c}),r=g("loading"),n=g(null),_=g(null);return(c,t)=>(u(),b("div",nt,[e("div",it,[e("div",ut,[r.value=="loading"?(u(),S(Ke,{key:0,gameProgress:r.value,"onUpdate:gameProgress":t[0]||(t[0]=l=>r.value=l),charaterDataList:i.value,objectsDataList:m.value},null,8,["gameProgress","charaterDataList","objectsDataList"])):G("",!0),r.value=="ready"?(u(),S(ua,{key:1,gameProgress:r.value,"onUpdate:gameProgress":t[1]||(t[1]=l=>r.value=l)},null,8,["gameProgress"])):G("",!0),r.value=="choose"?(u(),S(ka,{key:2,gameProgress:r.value,"onUpdate:gameProgress":t[2]||(t[2]=l=>r.value=l),charaterDataList:i.value,curCharaterData:n.value,"onUpdate:curCharaterData":t[3]||(t[3]=l=>n.value=l)},null,8,["gameProgress","charaterDataList","curCharaterData"])):G("",!0),r.value=="playing"?(u(),S(Ha,{key:3,gameProgress:r.value,"onUpdate:gameProgress":t[4]||(t[4]=l=>r.value=l),lastGameScores:_.value,"onUpdate:lastGameScores":t[5]||(t[5]=l=>_.value=l),curCharaterData:n.value,objectsDataList:m.value},null,8,["gameProgress","lastGameScores","curCharaterData","objectsDataList"])):G("",!0),r.value=="result"?(u(),S(st,{key:4,gameProgress:r.value,"onUpdate:gameProgress":t[6]||(t[6]=l=>r.value=l),lastGameScores:_.value,"onUpdate:lastGameScores":t[7]||(t[7]=l=>_.value=l),curCharaterData:n.value},null,8,["gameProgress","lastGameScores","curCharaterData"])):G("",!0)])])]))}};export{gt as default};
