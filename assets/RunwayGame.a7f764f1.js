import{z as H,A as w,r as _,o as Q,a as d,c as y,b as e,q as D,F as I,h as W,m as ne,G as ie,l as E,t as j,u as L,H as ue,I as _e,J as me,k as J,n as q,j as $,C as R}from"./index.af6d3373.js";var de="/joy-toys/assets/bottle_01.61af237a.png",ge="/joy-toys/assets/bottle_02.503a595e.png",ve="/joy-toys/assets/bottle_03.f82feafb.png",pe="/joy-toys/assets/bottle_04.387b6590.png",be="/joy-toys/assets/bottle_05.519ce283.png",ye="/joy-toys/assets/bottle_06.02ade757.png",he="/joy-toys/assets/bottle_07.e8a57db8.png",fe="/joy-toys/assets/bottle_08.1c39276e.png",je="/joy-toys/assets/bottle_09.0d93018d.png",we="/joy-toys/assets/candy_01.309c60ef.png",ke="/joy-toys/assets/candy_02.0f02f1bd.png",Pe="/joy-toys/assets/candy_03.b0041721.png",$e="/joy-toys/assets/muti_object_01.e03baba1.png",De="/joy-toys/assets/muti_object_02.5c2535b1.png",Le="/joy-toys/assets/muti_object_03.ebde4353.png",Ce="/joy-toys/assets/bear.dc1af04a.png",Se="/joy-toys/assets/butterfly.0586444d.png",Ge="/joy-toys/assets/double-heart.8de2ec47.png",Re="/joy-toys/assets/flower.229a3cf6.png";const Te={class:"game-page loading-page"},Me=e("h2",{class:"page-title"},"Loading...",-1),Ue=[Me],Ne={__name:"RunwayGameLoading",props:H({charaterDataList:Array,objectsDataList:Array},{gameProgress:{},gameProgressModifiers:{}}),emits:["update:gameProgress"],setup(m){const i=w(m,"gameProgress"),g=m,r=_(!0);async function c(){function u(o){let t=new Image;t.src=o}for(let o=0;o<g.charaterDataList.length;o++)u(g.charaterDataList.imgUrl);for(let o=0;o<g.objectsDataList.length;o++)u(g.objectsDataList.imgUrl)}return Q(()=>{c().then(function(){function u(){switch(console.log("Loading..."),document.readyState){case"interactive":case"complete":r.value=!1,r.value||setTimeout(()=>{i.value="ready"},1500),clearInterval(o),console.log("Ready!");break}}let o=setInterval(u,500)})}),(u,o)=>(d(),y("div",Te,Ue))}};var xe="/joy-toys/assets/kana_01.c63aa3bd.png",Xe="/joy-toys/assets/book.9a3bdc28.png",Ie="/joy-toys/assets/bgm.65c19ae0.png",Ee="/joy-toys/assets/bear_02.ab4f635e.png";const He={class:"game-page ready-page"},Be=e("h2",{class:"page-title"},"Runway Game",-1),Ye=e("div",{class:"hero-img"},[e("div",{class:"image-wrap"},[e("img",{src:xe,alt:"kana"})])],-1),We=e("div",{class:"image-wrap"},[e("img",{src:Xe,alt:"book"})],-1),Ae=e("span",null,[D("Read"),e("br"),D("Book")],-1),Oe=[We,Ae],Ve=e("div",{class:"image-wrap"},[e("img",{src:Ie,alt:"bgm"})],-1),Fe=e("span",null,"BGM",-1),ze=[Ve,Fe],Je=e("div",{class:"image-wrap"},[e("img",{src:Ee,alt:"bear"})],-1),qe=e("span",null,"Select Player",-1),Ke=[Je,qe],Qe={__name:"RunwayGameReady",props:{gameProgress:{},gameProgressModifiers:{}},emits:["update:gameProgress"],setup(m){const i=w(m,"gameProgress");function g(){i.value="choose"}function r(){alert("\u5C1A\u672A\u958B\u653E")}function c(){alert("\u5C1A\u672A\u958B\u653E")}return(u,o)=>(d(),y("div",He,[Be,e("div",{class:"ready-wrap"},[Ye,e("div",{onClick:c,class:"image-btn btn-book"},Oe),e("div",{onClick:r,class:"image-btn btn-bgm"},ze),e("div",{onClick:g,class:"image-btn btn-bear"},Ke)])]))}};var Ze="/joy-toys/assets/kana_03.86aea46c.png";const ea={class:"game-page select-page"},aa=e("h2",{class:"page-title"},"Select Player",-1),ta={class:"select-wrap"},sa={class:"player-card-wrap"},ra=["for"],oa=["id","value"],ca={class:"image-wrap"},la=["src","alt"],na={class:"text-wrap"},ia={class:"card-title"},ua=e("div",{class:"page-bottom-img"},[e("div",{class:"image-wrap"},[e("img",{src:Ze,alt:"kana"})])],-1),_a={__name:"RunwayGameChoose",props:H({charaterDataList:Array},{gameProgress:{},gameProgressModifiers:{},curCharaterData:{},curCharaterDataModifiers:{}}),emits:["update:gameProgress","update:curCharaterData"],setup(m){const i=w(m,"gameProgress"),g=w(m,"curCharaterData"),r=m,c=_(1);function u(){let t=r.charaterDataList.filter(n=>n.imgId==c.value);g.value=t[0],i.value="playing"}function o(){i.value="ready"}return(t,n)=>(d(),y("div",ea,[aa,e("div",ta,[e("div",sa,[(d(!0),y(I,null,W(r.charaterDataList,(v,b)=>(d(),y("label",{key:b,class:"radio-label",for:`player-${b}`},[ne(e("input",{type:"radio",class:"btn-check",name:"options",id:`player-${b}`,autocomplete:"off",value:v.imgId,"onUpdate:modelValue":n[0]||(n[0]=C=>c.value=C)},null,8,oa),[[ie,c.value]]),e("div",{class:E(["card player-card",{active:v.imgId===c.value}])},[e("div",ca,[e("img",{src:v.imgUrl,alt:v.imgName},null,8,la)]),e("div",na,[e("span",ia,j(v.playerName),1),e("ul",null,[e("li",null,"Speed: "+j(v.playerPace),1),e("li",null,"Lives: "+j(v.playerLives),1)])])],2)],8,ra))),128))]),e("div",{class:"btns-wrap"},[e("button",{type:"button",onClick:o,class:"btn btn-secondary"},"Back"),e("button",{type:"button",onClick:u,class:"btn btn-primary"},"Start Game")])]),ua]))}},ma={class:"game-page play-page"},da={class:"header"},ga={class:"header-item"},va=e("span",{class:"item-title"},"Lives:",-1),pa={class:"item-content"},ba={class:"header-item"},ya=e("span",{class:"item-title"},"Scores:",-1),ha={class:"item-content"},fa={class:"header-item"},ja=e("span",{class:"item-title"},"Time:",-1),wa={class:"item-content"},ka=["data-id","data-type"],Pa=["src","alt"],$a=["src"],K=5,Da={__name:"RunwayGamePlaying",props:H({curCharaterData:Object,objectsDataList:Array},{gameProgress:{},gameProgressModifiers:{},lastGameScores:{},lastGameScoresModifiers:{}}),emits:["update:gameProgress","update:lastGameScores"],setup(m){const i=m,g=w(m,"gameProgress"),r=w(m,"lastGameScores"),c=L(()=>!(s.value.lives>0)),u=_(null),o=_(0),t=_(0),n=_(4),v=_([]),b=L(()=>v.value.length);let C=[];const Z=function(a){a&&C.push({id:a.getAttribute("data-id"),el:a})};ue(()=>{C=[]}),_e(()=>{});function ee(){let a=0,p=n.value-1,l=Math.round(Math.random()*(p-a))+a,f=b.value>0&&b.value%10==0?"good":"bad",S=i.objectsDataList.filter(G=>G.objectType===f),x=0,Y=S.length-1,le=Math.round(Math.random()*(Y-x))+x,X=S[le];v.value.push({id:b.value>0?v.value[b.value-1].id+1:0,type:f,score:X.objectPrice,objectName:X.objectName,imgUrl:X.imgUrl,imgName:X.imgName,show:!0,hit:!1,isProcessed:!1,track:l,curX:(o.value-20)/n.value*l+s.value.curW/2,curY:0,curW:0,curH:0}),J(()=>{C.forEach(G=>{G.id==v.value[b.value-1].id&&(v.value[b.value-1].curW=G.el.clientWidth,v.value[b.value-1].curH=G.el.clientHeight)})}),ae(v.value[b.value-1])}const k=_(5),A=_(30);function ae(a){let p=+s.value.playingTime;switch(!0){case p>80:k.value=20;break;case p>60:k.value=15;break;case p>40:k.value=10;break;case p>20:k.value=8;break;default:k.value+=.03}let l=a.curY,f=setTimeout(S,A.value);function S(){if(c.value){clearTimeout(f);return}if(f=setTimeout(S,A.value),l>t.value)a.isProcessed||(a.isProcessed=!0,a.type=="bad"&&!a.hit&&(s.value.scores+=a.score)),a.show=!1;else if(l+=k.value,a.curY=Math.round(l,0),a.curY>t.value-2*a.curH){let x=a.curX-s.value.curW,Y=a.curX+a.curW;if(a.curY+a.curH>s.value.curY&&s.value.curX>=x&&s.value.curX<=Y&&!a.hit){switch(a.hit=!0,a.isProcessed=!0,a.type){case"bad":s.value.lives==1&&(s.value.deathReason={id:a.id,name:a.objectName,imgUrl:a.imgUrl,imgName:a.imgName}),s.value.attacked=!0,s.value.lives--;break;case"good":s.value.lives<K&&(s.value.restore=!0,s.value.lives++);break}setTimeout(function(){s.value.attacked=!1,s.value.restore=!1},600)}}}}const P=_(1500);function O(){if(c.value)return;let a=+s.value.playingTime;switch(!0){case a>80:P.value=400;break;case a>60:P.value=600;break;case a>40:P.value=1e3;break;case a>20:P.value=1300;break;default:P.value=1500}ee(),setTimeout(O,P.value)}const h=_(null),s=_({id:i.curCharaterData.id,name:i.curCharaterData.name,pace:i.curCharaterData.playerPace,lives:i.curCharaterData.playerLives,scores:0,playingTime:0,attacked:!1,restore:!1,deathReason:null,curW:0,curH:0,curX:0,curY:0}),te=L(()=>10),se=L(()=>o.value-s.value.curW-15);function T(a,p){switch(a){case"left":s.value.curX>=te.value&&(s.value.curX-=p);break;case"right":s.value.curX<=se.value&&(s.value.curX+=p);break}}const M=_(null),re=_(50),oe=setInterval(function(){if(M.value!=null){if(c.value){clearInterval(oe);return}switch(M.value){case"ArrowLeft":T("left",s.value.pace);break;case"ArrowRight":T("right",s.value.pace);break}}},re.value),B=_(null),U=_(!1);function V(a){c.value||(a.type=="touchstart"&&(a=a.touches[0]),U.value=!0,B.value=a.clientX)}function F(a){if(c.value||!U.value)return;a.type=="touchmove"&&(a=a.touches[0]);let p=a.clientX,l=p-B.value;B.value=p;let f=Math.abs(l)>10?10:Math.abs(l);l<0?T("left",f):T("right",f)}function N(a){c.value||!U.value||(U.value=!1)}me(c,async(a,p)=>{a&&setTimeout(()=>{r.value=s.value,g.value="result"},500)});const ce=new Date;function z(){if(c.value)return;let a=new Date;s.value.playingTime=((a-ce)/1e3).toFixed(2),setTimeout(z,10)}return Q(()=>{document.addEventListener("keydown",a=>{M.value=a.key}),document.addEventListener("keyup",a=>{M.value=null}),J(()=>{o.value=u.value.clientWidth,t.value=u.value.clientHeight,s.value.curW=h.value.clientWidth,s.value.curH=h.value.clientHeight,s.value.curX=o.value/2+15,s.value.curY=t.value-s.value.curH-10,h.value.addEventListener("mousedown",V),h.value.addEventListener("touchstart",V),h.value.addEventListener("mousemove",F),h.value.addEventListener("touchmove",F),h.value.addEventListener("mouseup",N),h.value.addEventListener("mouseleave",N),h.value.addEventListener("touchend",N),h.value.addEventListener("touchcancel",N),O(),z()})}),(a,p)=>(d(),y("div",ma,[e("div",da,[e("div",ga,[va,e("span",pa,[(d(),y(I,null,W(K,l=>e("span",{key:`lives-${l}`,class:E(["live",{active:l<=s.value.lives}])},null,2)),64))])]),e("div",ba,[ya,e("span",ha,j(s.value.scores),1)]),e("div",fa,[ja,e("span",wa,j(s.value.playingTime)+"s",1)])]),e("div",{ref_key:"refTrack",ref:u,class:"track"},[(d(!0),y(I,null,W(v.value,(l,f)=>(d(),y(I,{key:l.id},[l.show?(d(),y("div",{key:0,ref_for:!0,ref:Z,"data-id":l.id,"data-type":l.type,class:E(["object",{hit:l.hit,hide:!l.show}]),style:q({top:`${l.curY}px`,left:`${l.curX}px`})},[e("img",{src:l.imgUrl,alt:l.imgName},null,8,Pa)],14,ka)):$("",!0)],64))),128)),e("div",{ref_key:"refPlayer",ref:h,class:E(["player",{attacked:s.value.attacked,restore:s.value.restore}]),style:q({top:`${s.value.curY}px`,left:`${s.value.curX}px`})},[e("img",{src:i.curCharaterData.imgUrl,alt:"props.curCharaterData.imgName"},null,8,$a)],6)],512)]))}},La={class:"game-page result-page"},Ca=e("h2",{class:"page-title"},"Game Over",-1),Sa={class:"result-wrap"},Ga={class:"result-card-wrap"},Ra={class:"card result-card"},Ta={class:"image-wrap"},Ma=["src","alt"],Ua={class:"text-wrap"},Na={class:"card-title"},xa={class:"list-group list-group-flush"},Xa={class:"list-group-item"},Ia={class:"text-primary"},Ea={class:"list-group-item"},Ha={class:"text-primary"},Ba={class:"list-group-item"},Ya={class:"obj-image"},Wa={class:"image-wrap"},Aa=["src","alt"],Oa={class:"obj-title"},Va={__name:"RunwayGameResult",props:H({curCharaterData:Object},{gameProgress:{},gameProgressModifiers:{},lastGameScores:{},lastGameScoresModifiers:{}}),emits:["update:gameProgress","update:lastGameScores"],setup(m){const i=m,g=w(m,"gameProgress"),r=w(m,"lastGameScores");function c(){g.value="playing"}function u(){g.value="choose"}return(o,t)=>(d(),y("div",La,[Ca,e("div",Sa,[e("div",Ga,[e("div",Ra,[e("div",Ta,[e("img",{src:i.curCharaterData.imgUrl,alt:i.curCharaterData.imgName},null,8,Ma)]),e("div",Ua,[e("span",Na,j(i.curCharaterData.playerName),1),e("ul",xa,[e("li",Xa,[D("Your score is "),e("span",Ia,j(r.value.scores),1)]),e("li",Ea,[D("Survive for "),e("span",Ha,j(r.value.playingTime),1),D(" seconds")]),e("li",Ba,[D(" Reasons for losing: "),e("div",Ya,[e("div",Wa,[e("img",{src:r.value.deathReason.imgUrl,alt:r.value.deathReason.imgName},null,8,Aa)]),e("span",Oa,j(r.value.deathReason.name),1)])])])])])]),e("div",{class:"btns-wrap"},[e("button",{type:"button",onClick:c,class:"btn btn-primary"},"Play Again"),e("button",{type:"button",onClick:u,class:"btn btn-secondary"},"Reselect Player")])])]))}},Fa=[{id:1,name:"double-heart",player_name:"Double Heart",player_pace:15,player_lives:3},{id:2,name:"flower",player_name:"Flower",player_pace:10,player_lives:4},{id:3,name:"bear",player_name:"Bear",player_pace:20,player_lives:2},{id:4,name:"butterfly",player_name:"Butterfly",player_pace:25,player_lives:1}];var za={charater:Fa};const Ja=[{name:"candy_01",object_name:"Candy (Pink)",object_type:"good",object_price:1},{name:"candy_02",object_name:"Candy (Yellow)",object_type:"good",object_price:1},{name:"candy_03",object_name:"Candy (Blue)",object_type:"good",object_price:1},{name:"bottle_01",object_name:"Love Poison",object_type:"bad",object_price:10},{name:"bottle_02",object_name:"Love Letter Poison",object_type:"bad",object_price:10},{name:"bottle_03",object_name:"Depression Poison",object_type:"bad",object_price:10},{name:"bottle_04",object_name:"Jealousy Poison",object_type:"bad",object_price:10},{name:"bottle_05",object_name:"Heart Poison",object_type:"bad",object_price:10},{name:"bottle_06",object_name:"Heartbreak Poison",object_type:"bad",object_price:10},{name:"bottle_07",object_name:"Betrayal Poison",object_type:"bad",object_price:10},{name:"bottle_08",object_name:"Depressive Poison",object_type:"bad",object_price:10},{name:"bottle_09",object_name:"Secret Poison",object_type:"bad",object_price:10},{name:"muti_object_01",object_name:"Compound Poison",object_type:"bad",object_price:10},{name:"muti_object_02",object_name:"Compound Poison",object_type:"bad",object_price:10},{name:"muti_object_03",object_name:"Compound Poison",object_type:"bad",object_price:10}];var qa={objects:Ja};const Ka={class:"runway-game"},Qa={class:"runway-game-inner"},Za={class:"page-outer"},at={__name:"RunwayGame",setup(m){const i=L(()=>{const o=[];return za.charater.forEach(t=>{o.push({imgId:t.id,imgName:t.name,imgUrl:new URL({"/src/assets/images/runway-game/player/bear.png":Ce,"/src/assets/images/runway-game/player/butterfly.png":Se,"/src/assets/images/runway-game/player/double-heart.png":Ge,"/src/assets/images/runway-game/player/flower.png":Re}[`/src/assets/images/runway-game/player/${t.name}.png`],self.location),playerName:t.player_name,playerPace:t.player_pace,playerLives:t.player_lives})}),o}),g=L(()=>{const o=[];return qa.objects.forEach(t=>{o.push({imgId:t.id,imgName:t.name,imgUrl:new URL({"/src/assets/images/runway-game/object/bottle_01.png":de,"/src/assets/images/runway-game/object/bottle_02.png":ge,"/src/assets/images/runway-game/object/bottle_03.png":ve,"/src/assets/images/runway-game/object/bottle_04.png":pe,"/src/assets/images/runway-game/object/bottle_05.png":be,"/src/assets/images/runway-game/object/bottle_06.png":ye,"/src/assets/images/runway-game/object/bottle_07.png":he,"/src/assets/images/runway-game/object/bottle_08.png":fe,"/src/assets/images/runway-game/object/bottle_09.png":je,"/src/assets/images/runway-game/object/candy_01.png":we,"/src/assets/images/runway-game/object/candy_02.png":ke,"/src/assets/images/runway-game/object/candy_03.png":Pe,"/src/assets/images/runway-game/object/muti_object_01.png":$e,"/src/assets/images/runway-game/object/muti_object_02.png":De,"/src/assets/images/runway-game/object/muti_object_03.png":Le}[`/src/assets/images/runway-game/object/${t.name}.png`],self.location),objectName:t.object_name,objectType:t.object_type,objectPrice:t.object_price})}),o}),r=_("loading"),c=_(null),u=_(null);return(o,t)=>(d(),y("div",Ka,[e("div",Qa,[e("div",Za,[r.value=="loading"?(d(),R(Ne,{key:0,gameProgress:r.value,"onUpdate:gameProgress":t[0]||(t[0]=n=>r.value=n),charaterDataList:i.value,objectsDataList:g.value},null,8,["gameProgress","charaterDataList","objectsDataList"])):$("",!0),r.value=="ready"?(d(),R(Qe,{key:1,gameProgress:r.value,"onUpdate:gameProgress":t[1]||(t[1]=n=>r.value=n)},null,8,["gameProgress"])):$("",!0),r.value=="choose"?(d(),R(_a,{key:2,gameProgress:r.value,"onUpdate:gameProgress":t[2]||(t[2]=n=>r.value=n),charaterDataList:i.value,curCharaterData:c.value,"onUpdate:curCharaterData":t[3]||(t[3]=n=>c.value=n)},null,8,["gameProgress","charaterDataList","curCharaterData"])):$("",!0),r.value=="playing"?(d(),R(Da,{key:3,gameProgress:r.value,"onUpdate:gameProgress":t[4]||(t[4]=n=>r.value=n),lastGameScores:u.value,"onUpdate:lastGameScores":t[5]||(t[5]=n=>u.value=n),curCharaterData:c.value,objectsDataList:g.value},null,8,["gameProgress","lastGameScores","curCharaterData","objectsDataList"])):$("",!0),r.value=="result"?(d(),R(Va,{key:4,gameProgress:r.value,"onUpdate:gameProgress":t[6]||(t[6]=n=>r.value=n),lastGameScores:u.value,"onUpdate:lastGameScores":t[7]||(t[7]=n=>u.value=n),curCharaterData:c.value},null,8,["gameProgress","lastGameScores","curCharaterData"])):$("",!0)])])]))}};export{at as default};
