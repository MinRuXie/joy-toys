import{_ as U,e as m,f as H,o as q,n as I,a as _,c as h,w as b,v as k,b as c,g as J,t as L,h as K,F as S,i as N,j as Q,k as W}from"./index.f4c16058.js";var Z="/joy-toys/assets/header2.57d99039.png",$="/joy-toys/assets/743726__denkyschuk__happy-family-bpm-100-loop.5c0b1c51.mp3",ll="/joy-toys/assets/676457__stevenmaertens__wooden-blocks.66ae1041.mp3",el="/joy-toys/assets/bear-icon.7bd06959.svg";const tl={name:"NumberPuzzleGame",setup(){const p=m(null),r=m(null);let v=m(!1);const s=H([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);let A=m(0),y=m(!1),d=m(!1),o=4,g=0,f=o-1;function T(){let a=0,i=0;do a=Math.floor(Math.random()*(f-g+1))+g,i=Math.floor(Math.random()*(f-g+1))+g;while(s[a][i]!=0);return[a,i]}function w(a){let[i,e]=T();s[i][e]=a}function x(a){A.value+=a}async function V(){let a=!1;for(let i=0;i<o;i++){let e=[],t=[];for(let n=0;n<o;n++)e.push(s[n][i]),t.push(s[i][n]);(e.indexOf(0)!=-1||t.indexOf(0)!=-1)&&(a=!0)}return a}async function X(){let a=!1;for(let i=0;i<o;i++){let e=[],t=[];for(let n=0;n<o;n++)s[n][i]!=0&&e.push(s[n][i]),s[i][n]!=0&&t.push(s[i][n]);for(let n=0;n<e.length;n++)e[n]==e[n+1]&&(a=!0);for(let n=0;n<t.length;n++)t[n]==t[n+1]&&(a=!0)}return a}async function u(a){let i=await V(),e=await X();i?a&&(w(2),u(!1)):e||(d.value=!0)}function z(){let a=s.map(e=>e.slice());for(let e=0;e<o;e++){let t=[];for(let l=0;l<o;l++)s[l][e]!=0&&(t.push(s[l][e]),s[l][e]=0);for(let l=0;l<t.length;l++)t[l]==t[l+1]&&(t[l]=t[l]*2,t[l+1]=0,x(t[l]));let n=t.filter(l=>l!=0);for(let l=0;l<n.length;l++)s[l][e]=n[l]}let i=!1;for(let e=0;e<o;e++)for(let t=0;t<o;t++)a[t][e]!=s[t][e]&&(i=!0);return i}function B(){let a=s.map(e=>e.slice());for(let e=0;e<o;e++){let t=[];for(let l=0;l<o;l++)s[l][e]!=0&&(t.push(s[l][e]),s[l][e]=0);for(let l=t.length-1;l>0;l--)t[l]==t[l-1]&&(t[l]=t[l]*2,t[l-1]=0,x(t[l]));let n=t.filter(l=>l!=0);for(let l=0;l<n.length;l++){let P=o-n.length;s[l+P][e]=n[l]}}let i=!1;for(let e=0;e<o;e++)for(let t=0;t<o;t++)a[t][e]!=s[t][e]&&(i=!0);return i}function E(){let a=s.map(e=>e.slice());for(let e=0;e<o;e++){let t=[];for(let l=0;l<o;l++)s[e][l]!=0&&(t.push(s[e][l]),s[e][l]=0);for(let l=0;l<t.length;l++)t[l]==t[l+1]&&(t[l]=t[l]*2,t[l+1]=0,x(t[l]));let n=t.filter(l=>l!=0);for(let l=0;l<n.length;l++)s[e][l]=n[l]}let i=!1;for(let e=0;e<o;e++)for(let t=0;t<o;t++)a[e][t]!=s[e][t]&&(i=!0);return i}function G(){let a=s.map(e=>e.slice());for(let e=0;e<o;e++){let t=[];for(let l=0;l<o;l++)s[e][l]!=0&&(t.push(s[e][l]),s[e][l]=0);for(let l=t.length-1;l>0;l--)t[l]==t[l-1]&&(t[l]=t[l]*2,t[l-1]=0,x(t[l]));let n=t.filter(l=>l!=0);for(let l=0;l<n.length;l++){let P=o-n.length;s[e][l+P]=n[l]}}let i=!1;for(let e=0;e<o;e++)for(let t=0;t<o;t++)a[e][t]!=s[e][t]&&(i=!0);return i}function Y(){y.value=!0,w(2),w(2),w(4)}function R(a){switch(a){case"play":v.value=!0,p.value.play();break;case"pause":v.value=!1,p.value.pause();break}}q(()=>{I(()=>{p.value.volume=.5,r.value.volume=.6;let a=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${a}px`)})}),document.addEventListener("keydown",a=>{if(d.value||!y.value)return;v.value&&(r.value.pause(),r.value.play());const i=a.key;let e=!0;switch(i){case"ArrowUp":a.preventDefault(),e=z(),u(e);break;case"ArrowDown":a.preventDefault(),e=B(),u(e);break;case"ArrowLeft":a.preventDefault(),e=E(),u(e);break;case"ArrowRight":a.preventDefault(),e=G(),u(e);break}});let j=0,M=0,C=0,D=0;function F(a){j=a.touches[0].clientX,M=a.touches[0].clientY}function O(a){if(!y.value)return;v.value&&(r.value.pause(),r.value.play()),C=a.changedTouches[0].clientX,D=a.changedTouches[0].clientY;let i=Math.abs(C-j),e=Math.abs(D-M),t=!0;i<e?M<D?(t=B(),u(t)):(t=z(),u(t)):j<C?(t=G(),u(t)):(t=E(),u(t))}return{refBgPlayer:p,refEffectPlayer:r,flag_audio:v,grid_cell:s,score:A,count:o,flag_gameover:d,flag_start:y,controlAudio:R,startGame:Y,touchstart:F,touchend:O}}},sl={class:"number-puzzle-game"},al=c("div",{class:"header"},[c("img",{src:Z,alt:"logo"})],-1),il=c("span",{class:"material-symbols-outlined"},"music_note",-1),nl=[il],ol=c("span",{class:"material-symbols-outlined"},"music_off",-1),rl=[ol],cl={class:"score-text"},dl={key:0,class:"title-text"},ul={class:"box-inner"},fl={loop:"",ref:"refBgPlayer"},vl=c("source",{src:$,type:"audio/mpeg"},null,-1),ml=[vl],_l={ref:"refEffectPlayer"},hl=c("source",{src:ll,type:"audio/mpeg"},null,-1),pl=[hl],yl=Q('<button type="button" class="icon-btn btn-view" data-bs-toggle="modal" data-bs-target="#exampleModal"><img src="'+el+'" alt="bear-icon"></button><div class="modal fade box-view-modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title title-text" id="exampleModalLabel"> Rilakkuma Box </h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="box box-list"><ul class="box-inner"><li class="list-item"><div class="cell"><div class="cell-inner style-2"><span class="cell-num">2</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-4"><span class="cell-num">4</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-8"><span class="cell-num">8</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-16"><span class="cell-num">16</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-32"><span class="cell-num">32</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-64"><span class="cell-num">64</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-128"><span class="cell-num">128</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-256"><span class="cell-num">256</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-512"><span class="cell-num">512</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-1024"><span class="cell-num">1024</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-2048"><span class="cell-num">2048</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-4096"><span class="cell-num">4096</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-8192"><span class="cell-num">8192</span></div></div></li></ul></div></div></div></div></div>',2);function gl(p,r,v,s,A,y){return _(),h("div",sl,[al,b(c("button",{onClick:r[0]||(r[0]=d=>s.controlAudio("pause")),class:"icon-btn btn-audio"},nl,512),[[k,s.flag_audio]]),b(c("button",{onClick:r[1]||(r[1]=d=>s.controlAudio("play")),class:"icon-btn btn-audio"},rl,512),[[k,!s.flag_audio]]),b(c("button",{onClick:r[2]||(r[2]=(...d)=>s.startGame&&s.startGame(...d)),class:"normal-btn"},"Start",512),[[k,!s.flag_start]]),b(c("h4",cl,[J("Score:"),c("span",null,L(s.score),1)],512),[[k,s.flag_start]]),s.flag_gameover?(_(),h("h3",dl,"\u904A\u6232\u7D50\u675F")):K("",!0),c("div",{class:"box",onTouchstart:r[3]||(r[3]=(...d)=>s.touchstart&&s.touchstart(...d)),onTouchend:r[4]||(r[4]=(...d)=>s.touchend&&s.touchend(...d))},[c("div",ul,[(_(!0),h(S,null,N(s.count,(d,o)=>(_(),h(S,{key:o},[(_(!0),h(S,null,N(s.count,(g,f)=>(_(),h("div",{key:o+"-"+f,class:"cell"},[c("div",{class:W(["cell-inner",`style-${s.grid_cell[o][f]}`])},[b(c("span",{class:"cell-num"},L(s.grid_cell[o][f]),513),[[k,s.grid_cell[o][f]!=0]])],2)]))),128))],64))),128))])],32),c("audio",fl,ml,512),c("audio",_l,pl,512),yl])}var kl=U(tl,[["render",gl]]);export{kl as default};
