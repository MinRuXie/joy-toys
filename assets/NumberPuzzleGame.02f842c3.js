import{_ as G,e as y,o as R,n as X,a as h,c as g,b as d,F as A,f as I,t as J,w as x,v as P,g as K,r as D,h as Q,i as S,j as W,k as L,d as T,l as Z}from"./index.44966d5e.js";var ee="/joy-toys/assets/bear-icon.7bd06959.svg";const le={name:"NumberPuzzleGameViewModal",setup(){let u=y(null);return R(()=>{X(()=>{u.value.click()})}),{refModalBtn:u}}},te={ref:"refModalBtn",type:"button",class:"icon-btn btn-view","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},ae=d("img",{src:ee,alt:"bear-icon"},null,-1),se=[ae],ie=I('<div class="modal fade box-view-modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title title-text" id="exampleModalLabel"> Rilakkuma Box </h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="box box-list"><ul class="box-inner"><li class="list-item"><div class="cell"><div class="cell-inner style-2"><span class="cell-num">2</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-4"><span class="cell-num">4</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-8"><span class="cell-num">8</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-16"><span class="cell-num">16</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-32"><span class="cell-num">32</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-64"><span class="cell-num">64</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-128"><span class="cell-num">128</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-256"><span class="cell-num">256</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-512"><span class="cell-num">512</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-1024"><span class="cell-num">1024</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-2048"><span class="cell-num">2048</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-4096"><span class="cell-num">4096</span></div></div></li><li class="list-item"><div class="cell"><div class="cell-inner style-8192"><span class="cell-num">8192</span></div></div></li></ul></div></div></div></div></div>',1);function oe(u,c,s,r,f,m){return h(),g(A,null,[d("button",te,se,512),ie],64)}var ne=G(le,[["render",oe]]),re="/joy-toys/assets/743726__denkyschuk__happy-family-bpm-100-loop.5c0b1c51.mp3",ce="/joy-toys/assets/676457__stevenmaertens__wooden-blocks.66ae1041.mp3";const de={name:"NumberPuzzleGameAudio",props:["flag_audio"],emits:["eventControlAudio"],setup(u,c){let s=J(u,"flag_audio");const r=y(null),f=y(null);function m(n){c.emit("eventControlAudio",n)}return{init_flag_audio:s,refBgPlayer:r,refEffectPlayer:f,controlAudio:m,controlAudio:m}}},ue=d("span",{class:"material-symbols-outlined"},"music_note",-1),fe=[ue],me=d("span",{class:"material-symbols-outlined"},"music_off",-1),ve=[me],_e={loop:"",ref:"refBgPlayer"},pe=d("source",{src:re,type:"audio/mpeg"},null,-1),he=[pe],ge={ref:"refEffectPlayer"},ye=d("source",{src:ce,type:"audio/mpeg"},null,-1),be=[ye];function we(u,c,s,r,f,m){return h(),g(A,null,[x(d("button",{onClick:c[0]||(c[0]=n=>r.controlAudio("pause")),class:"icon-btn btn-audio"},fe,512),[[P,r.init_flag_audio]]),x(d("button",{onClick:c[1]||(c[1]=n=>r.controlAudio("play")),class:"icon-btn btn-audio"},ve,512),[[P,!r.init_flag_audio]]),d("audio",_e,he,512),d("audio",ge,be,512)],64)}var ke=G(de,[["render",we]]),Ae="/joy-toys/assets/header2.57d99039.png";const xe={name:"NumberPuzzleGame",components:{NumberPuzzleGameViewModal:ne,NumberPuzzleGameAudio:ke},setup(){let u=y(null),c=y(!1);const s=K([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);let r=y(0),f=y(!1),m=y(!1),n=4,w=0,v=n-1;function b(){let a=0,i=0;do a=Math.floor(Math.random()*(v-w+1))+w,i=Math.floor(Math.random()*(v-w+1))+w;while(s[a][i]!=0);return[a,i]}function k(a){let[i,l]=b();s[i][l]=a}function _(a){r.value+=a}async function Y(){let a=!1;for(let i=0;i<n;i++){let l=[],t=[];for(let o=0;o<n;o++)l.push(s[o][i]),t.push(s[i][o]);(l.indexOf(0)!=-1||t.indexOf(0)!=-1)&&(a=!0)}return a}async function F(){let a=!1;for(let i=0;i<n;i++){let l=[],t=[];for(let o=0;o<n;o++)s[o][i]!=0&&l.push(s[o][i]),s[i][o]!=0&&t.push(s[i][o]);for(let o=0;o<l.length;o++)l[o]==l[o+1]&&(a=!0);for(let o=0;o<t.length;o++)t[o]==t[o+1]&&(a=!0)}return a}async function p(a){let i=await Y(),l=await F();i?a&&(k(2),p(!1)):l||(m.value=!0)}function E(){let a=s.map(l=>l.slice());for(let l=0;l<n;l++){let t=[];for(let e=0;e<n;e++)s[e][l]!=0&&(t.push(s[e][l]),s[e][l]=0);for(let e=0;e<t.length;e++)t[e]==t[e+1]&&(t[e]=t[e]*2,t[e+1]=0,_(t[e]));let o=t.filter(e=>e!=0);for(let e=0;e<o.length;e++)s[e][l]=o[e]}let i=!1;for(let l=0;l<n;l++)for(let t=0;t<n;t++)a[t][l]!=s[t][l]&&(i=!0);return i}function B(){let a=s.map(l=>l.slice());for(let l=0;l<n;l++){let t=[];for(let e=0;e<n;e++)s[e][l]!=0&&(t.push(s[e][l]),s[e][l]=0);for(let e=t.length-1;e>0;e--)t[e]==t[e-1]&&(t[e]=t[e]*2,t[e-1]=0,_(t[e]));let o=t.filter(e=>e!=0);for(let e=0;e<o.length;e++){let C=n-o.length;s[e+C][l]=o[e]}}let i=!1;for(let l=0;l<n;l++)for(let t=0;t<n;t++)a[t][l]!=s[t][l]&&(i=!0);return i}function $(){let a=s.map(l=>l.slice());for(let l=0;l<n;l++){let t=[];for(let e=0;e<n;e++)s[l][e]!=0&&(t.push(s[l][e]),s[l][e]=0);for(let e=0;e<t.length;e++)t[e]==t[e+1]&&(t[e]=t[e]*2,t[e+1]=0,_(t[e]));let o=t.filter(e=>e!=0);for(let e=0;e<o.length;e++)s[l][e]=o[e]}let i=!1;for(let l=0;l<n;l++)for(let t=0;t<n;t++)a[l][t]!=s[l][t]&&(i=!0);return i}function V(){let a=s.map(l=>l.slice());for(let l=0;l<n;l++){let t=[];for(let e=0;e<n;e++)s[l][e]!=0&&(t.push(s[l][e]),s[l][e]=0);for(let e=t.length-1;e>0;e--)t[e]==t[e-1]&&(t[e]=t[e]*2,t[e-1]=0,_(t[e]));let o=t.filter(e=>e!=0);for(let e=0;e<o.length;e++){let C=n-o.length;s[l][e+C]=o[e]}}let i=!1;for(let l=0;l<n;l++)for(let t=0;t<n;t++)a[l][t]!=s[l][t]&&(i=!0);return i}function O(){f.value=!0,k(2),k(2),k(4)}function U(a){switch(a){case"play":c.value=!0,u.value.refBgPlayer.play();break;case"pause":c.value=!1,u.value.refBgPlayer.pause();break}}R(()=>{X(()=>{console.log("refAudio.value",u.value),u.value.refBgPlayer.volume=.5,u.value.refEffectPlayer.volume=.6;let a=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${a}px`)})}),document.addEventListener("keydown",a=>{if(m.value||!f.value)return;c.value&&(u.value.refEffectPlayer.pause(),u.value.refEffectPlayer.play());const i=a.key;let l=!0;switch(i){case"ArrowUp":a.preventDefault(),l=E(),p(l);break;case"ArrowDown":a.preventDefault(),l=B(),p(l);break;case"ArrowLeft":a.preventDefault(),l=$(),p(l);break;case"ArrowRight":a.preventDefault(),l=V(),p(l);break}});let z=0,M=0,N=0,j=0;function H(a){z=a.touches[0].clientX,M=a.touches[0].clientY}function q(a){if(!f.value)return;c.value&&(u.value.refEffectPlayer.pause(),u.value.refEffectPlayer.play()),N=a.changedTouches[0].clientX,j=a.changedTouches[0].clientY;let i=Math.abs(N-z),l=Math.abs(j-M),t=!0;i<l?M<j?(t=B(),p(t)):(t=E(),p(t)):z<N?(t=V(),p(t)):(t=$(),p(t))}return{refAudio:u,flag_audio:c,grid_cell:s,score:r,count:n,flag_gameover:m,flag_start:f,controlAudio:U,startGame:O,touchstart:H,touchend:q}}},Pe={class:"number-puzzle-game"},ze=d("div",{class:"header"},[d("img",{src:Ae,alt:"logo"})],-1),Me={class:"score-text"},Ne={key:0,class:"title-text"},je={class:"box-inner"};function Ce(u,c,s,r,f,m){const n=D("NumberPuzzleGameAudio"),w=D("NumberPuzzleGameViewModal");return h(),g("div",Pe,[ze,x(d("button",{onClick:c[0]||(c[0]=(...v)=>r.startGame&&r.startGame(...v)),class:"normal-btn"},"Start",512),[[P,!r.flag_start]]),x(d("h4",Me,[Q("Score:"),d("span",null,S(r.score),1)],512),[[P,r.flag_start]]),r.flag_gameover?(h(),g("h3",Ne,"\u904A\u6232\u7D50\u675F")):W("",!0),d("div",{class:"box",onTouchstart:c[1]||(c[1]=(...v)=>r.touchstart&&r.touchstart(...v)),onTouchend:c[2]||(c[2]=(...v)=>r.touchend&&r.touchend(...v))},[d("div",je,[(h(!0),g(A,null,L(r.count,(v,b)=>(h(),g(A,{key:b},[(h(!0),g(A,null,L(r.count,(k,_)=>(h(),g("div",{key:b+"-"+_,class:"cell"},[d("div",{class:Z(["cell-inner",`style-${r.grid_cell[b][_]}`])},[x(d("span",{class:"cell-num"},S(r.grid_cell[b][_]),513),[[P,r.grid_cell[b][_]!=0]])],2)]))),128))],64))),128))])],32),T(n,{ref:"refAudio",flag_audio:r.flag_audio,onEventControlAudio:r.controlAudio},null,8,["flag_audio","onEventControlAudio"]),T(w)])}var Ee=G(xe,[["render",Ce]]);export{Ee as default};
